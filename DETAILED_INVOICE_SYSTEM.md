# ุณุณุชู ูุงฺฉุชูุฑ ุจุง ุฌุฒุฆุงุช ฺฉุงูู ูุญุตููุงุช ๐

## โ ูุดฺฉู ุจุฑุทุฑู ุดุฏู

### ูุจู:
```
Product: โโโโโโโโโ
Qty: 5
Price: 200.00
Total: 860.00
```

### ุจุนุฏ:
```
1. Istanbul City Tour - STANDARD

โข Type: STANDARD
โข Booking Date: 2025-10-18
โข Booking Time: 09:00
โข Adult: 3 x 200.00 USD
โข Child: 1 x 140.00 USD
โข Infant: 1 (Free)
โข Professional Photography: 1 x 40.00 USD
โข Lunch Upgrade: 1 x 20.00 USD

Quantity: 5
Unit Price: 200.00 USD
Total: 860.00 USD
```

---

## ๐ฏ ุฌุฒุฆุงุช ููุงุด ุฏุงุฏู ุดุฏู

### ุจุฑุง ุชูุฑูุง (Tours):
1. โ **ูุงู ูุญุตูู** - ุนููุงู ฺฉุงูู ุชูุฑ
2. โ **ููุน/ูุงุฑุงูุช** - ูุซู STANDARD, PREMIUM, VIP
3. โ **ุชุงุฑุฎ ุฑุฒุฑู** - Booking Date
4. โ **ุฒูุงู ุฑุฒุฑู** - Booking Time
5. โ **ุดุฑฺฉุชโฺฉููุฏฺฏุงู:**
   - Adult (ุจุฒุฑฺฏุณุงู) - ุชุนุฏุงุฏ ร ููุช
   - Child (ฺฉูุฏฺฉ) - ุชุนุฏุงุฏ ร ููุช (70% ููุช ุจุฒุฑฺฏุณุงู)
   - Infant (ููุฒุงุฏ) - ุชุนุฏุงุฏ (ุฑุงฺฏุงู)
6. โ **ฺฏุฒููโูุง ุงูุชุฎุงุจ** - ูุซู ุนฺฉุงุณุ ูุงูุงุฑุ ุฑุงูููุง
7. โ **ุฏุฑุฎูุงุณุชโูุง ูฺู** - Special Requests
8. โ **ุฎูุงุตู ููุช:**
   - ุชุนุฏุงุฏ ฺฉู
   - ููุช ูุงุญุฏ
   - ุฌูุน ฺฉู

### ุจุฑุง ุงูุชูุงู (Transfers):
- ุชุงุฑุฎ ู ุฒูุงู ุฑูุช
- ุชุงุฑุฎ ู ุฒูุงู ุจุฑฺฏุดุช (ุงฺฏุฑ ุฏูุทุฑูู)
- ูุจุฏุง ู ููุตุฏ
- ููุน ูุณูู ูููู
- ุชุนุฏุงุฏ ูุณุงูุฑุงู

### ุจุฑุง ุฑูุฏุงุฏูุง (Events):
- ุชุงุฑุฎ ู ุฒูุงู ุฑูุฏุงุฏ
- ููุน ุจูุท
- ุจุฎุด/ุณฺฉุดู
- ุดูุงุฑู ุตูุฏูโูุง

---

## ๐ ุณุงุฎุชุงุฑ ุฏุงุฏู

### OrderItem Model:
```python
class OrderItem:
    # Basic Info
    product_title: str          # ูุงู ูุญุตูู
    product_type: str           # tour, event, transfer, car_rental
    variant_name: str           # ููุน ูุงุฑุงูุช
    
    # Booking Info
    booking_date: date          # ุชุงุฑุฎ ุฑุฒุฑู
    booking_time: time          # ุฒูุงู ุฑุฒุฑู
    quantity: int               # ุชุนุฏุงุฏ ฺฉู
    
    # Pricing
    unit_price: Decimal         # ููุช ูุงุญุฏ
    total_price: Decimal        # ููุช ฺฉู
    currency: str               # ูุงุญุฏ ูพูู
    
    # Detailed Data
    booking_data: dict = {
        'participants': {
            'adult': int,       # ุชุนุฏุงุฏ ุจุฒุฑฺฏุณุงู
            'child': int,       # ุชุนุฏุงุฏ ฺฉูุฏฺฉ
            'infant': int       # ุชุนุฏุงุฏ ููุฒุงุฏ
        },
        'special_requests': str,
        'schedule_id': str,
        # ... more fields
    }
    
    # Options
    selected_options: list = [
        {
            'name': str,        # ูุงู ฺฏุฒูู
            'quantity': int,    # ุชุนุฏุงุฏ
            'price': Decimal    # ููุช
        }
    ]
```

---

## ๐ง ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ูุชุฏ `_create_items_table_invoice()` ุจุงุฒููุณ ุดุฏ

**ูุจู:**
- ููุท ฺฉ ุฌุฏูู ุณุงุฏู ุจุง 4 ุณุชูู
- ุจุฏูู ุฌุฒุฆุงุช

**ุจุนุฏ:**
- ุจุฑุง ูุฑ ุขุชู:
  1. ูุฏุฑ ุจุง ูุงู ูุญุตูู
  2. ูุณุช ุฌุฒุฆุงุช (ููุนุ ุชุงุฑุฎุ ุฒูุงูุ ุดุฑฺฉุชโฺฉููุฏฺฏุงูุ ฺฏุฒููโูุง)
  3. ุฌุฏูู ุฎูุงุตู ููุช

### 2. ูพุดุชุจุงู ุงุฒ RTL

- ุฌุฒุฆุงุช ุจู ุตูุฑุช ุฎุท ุจู ุฎุท ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุงุฒ HTML tags ุงุณุชูุงุฏู ููโุดูุฏ (ูุดฺฉู RTL)
- ูููุช ู ุชุฑุงุฒ ุตุญุญ

### 3. ุชุฑุฌููโูุง ุฌุฏุฏ

ุงุถุงูู ุดุฏู ุจู `invoice_translations.py`:
- `variant_type` - ููุน
- `participants` - ุดุฑฺฉุชโฺฉููุฏฺฏุงู
- `adult` - ุจุฒุฑฺฏุณุงู
- `child` - ฺฉูุฏฺฉ
- `infant` - ููุฒุงุฏ
- `free` - ุฑุงฺฏุงู
- `options` - ฺฏุฒููโูุง

---

## ๐ ูุซุงู ุฎุฑูุฌ

### ูุงฺฉุชูุฑ ุงูฺฏูุณ:
```
๐ฆ Items

1. Istanbul City Tour - STANDARD

โข Type: STANDARD
โข Booking Date: 2025-10-18
โข Booking Time: 09:00
โข Adult: 3 x 200.00 USD
โข Child: 1 x 140.00 USD
โข Infant: 1 (Free)
โข Professional Photography: 1 x 40.00 USD
โข Lunch Upgrade: 1 x 20.00 USD

โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ Quantity    โ 5            โ
โ Unit Price  โ 200.00 USD   โ
โ Total       โ 860.00 USD   โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ

2. Bosphorus Cruise - PREMIUM

โข Type: PREMIUM
โข Booking Date: 2025-10-19
โข Booking Time: 14:00
โข Adult: 2 x 150.00 USD

โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ Quantity    โ 2            โ
โ Unit Price  โ 150.00 USD   โ
โ Total       โ 300.00 USD   โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
```

### ูุงฺฉุชูุฑ ูุงุฑุณ:
```
๐ฆ ุขุชู

1. ุชูุฑ ุดูุฑ ุงุณุชุงูุจูู - STANDARD

โข ููุน: STANDARD
โข ุชุงุฑุฎ ุฑุฒุฑู: 2025-10-18
โข ุฒูุงู ุฑุฒุฑู: 09:00
โข ุจุฒุฑฺฏุณุงู: 3 x 200.00 USD
โข ฺฉูุฏฺฉ: 1 x 140.00 USD
โข ููุฒุงุฏ: 1 (ุฑุงฺฏุงู)
โข ุนฺฉุงุณ ุญุฑููโุง: 1 x 40.00 USD
โข ุงุฑุชูุง ูุงูุงุฑ: 1 x 20.00 USD

โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ุชุนุฏุงุฏ       โ 5            โ
โ ููุช ูุงุญุฏ   โ 200.00 USD   โ
โ ุฌูุน         โ 860.00 USD   โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
```

---

## ๐งช ุชุณุช

### 1. ุชุณุช Backend:
```bash
python backend/test_invoice.py
```

ูุงูโูุง ุชููุฏ ุดุฏู:
- `invoice_en.pdf` - ุจุง ุฌุฒุฆุงุช ฺฉุงูู ุงูฺฏูุณ
- `invoice_fa.pdf` - ุจุง ุฌุฒุฆุงุช ฺฉุงูู ูุงุฑุณ
- `invoice_ar.pdf` - ุจุง ุฌุฒุฆุงุช ฺฉุงูู ุนุฑุจ

### 2. ุชุณุช ุงุฒ ูุฑูุฑฺฏุฑ:
```
http://localhost:3000/fa/orders/
```
ุฏฺฉูู Download โ ูุงฺฉุชูุฑ ุจุง ุฌุฒุฆุงุช ฺฉุงูู

---

## ๐จ ุทุฑุงุญ

### ุฑูฺฏโุจูุฏ:
- **ูุฏุฑ ุขุชู:** #2c3e50 (ุชุฑู)
- **ุฌุฒุฆุงุช:** #7f8c8d (ุฎุงฺฉุณุชุฑ)
- **ุฌุฏูู ููุช:** ูพุณโุฒููู ุณุจุฒ ุฑูุดู (#e8f6f3)

### ูููุช:
- **RTL:** Persian (Sahel/Vazirmatn)
- **LTR:** Helvetica
- **ุณุงุฒ:** 8-11pt

### ูุงุตููโฺฏุฐุงุฑ:
- ุจู ุขุชูโูุง: 0.3cm
- ุจุนุฏ ุงุฒ ุฌุฒุฆุงุช: 0.2cm
- ุจุนุฏ ุงุฒ ุฌุฏูู: 0.3cm

---

## ๐ ุฌุฑุงู ุฏุงุฏู

### 1. ุณุจุฏ ุฎุฑุฏ โ ุณูุงุฑุด:
```
Cart Item โ Order Item
โโ product_title โ
โโ variant_name โ
โโ booking_date โ
โโ booking_time โ
โโ booking_data โ
โ  โโ participants โ
โ  โโ special_requests โ
โโ selected_options โ
```

### 2. ุณูุงุฑุด โ ูุงฺฉุชูุฑ:
```
Order Item โ Invoice Details
โโ Extract product info
โโ Extract booking info
โโ Extract participants
โโ Extract options
โโ Format for display
```

---

## ๐ ุจูุจูุฏูุง ุขูุฏู

### 1. ุชุตุงูุฑ ูุญุตูู:
```python
# ุงุถุงูู ฺฉุฑุฏู ุชุตูุฑ ฺฉูฺฺฉ ูุญุตูู
if item.product_image_url:
    img = Image(item.product_image_url, width=2*cm, height=2*cm)
    content.append(img)
```

### 2. QR Code:
```python
# QR code ุจุฑุง ุชุฃุฏ ุณูุงุฑุด
from reportlab.graphics.barcode import qr
qr_code = qr.QrCodeWidget(order.order_number)
content.append(qr_code)
```

### 3. ููุดู ูุณุฑ (ุจุฑุง ุงูุชูุงู):
```python
# ููุงุด ููุดู ูุณุฑ
if item.product_type == 'transfer':
    # Add map image
    pass
```

---

## โ ูุชุฌู

ูุงฺฉุชูุฑูุง ุญุงูุง ุดุงูู:
- โ ุฌุฒุฆุงุช ฺฉุงูู ูุญุตููุงุช
- โ ุงุทูุงุนุงุช ุดุฑฺฉุชโฺฉููุฏฺฏุงู
- โ ฺฏุฒููโูุง ุงูุชุฎุงุจ
- โ ุชุงุฑุฎ ู ุฒูุงู ุฏูู
- โ ููุชโฺฏุฐุงุฑ ุดูุงู
- โ ูพุดุชุจุงู ฺูุฏุฒุจุงูู
- โ RTL Support
- โ ุทุฑุงุญ ุญุฑููโุง

ุฏฺฏุฑ ูุฑุจุนโูุง ุฎุงู (โ) ูุฌูุฏ ูุฏุงุฑุฏ! ๐
