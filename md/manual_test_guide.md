# راهنمای تست دستی سیستم تور

## 🎯 سناریوهای تست

### 1. تست اعتبارسنجی شرکت‌کنندگان

#### ✅ تست 1: انتخاب نوزاد بیش از حد مجاز

1. به صفحه تور دیتیل بروید
2. تعداد نوزادان را به 3 یا بیشتر تغییر دهید
3. **انتظار**: پیام خطای "حداکثر 2 نوزاد در هر رزرو مجاز است" نمایش داده شود
4. دکمه رزرو غیرفعال باشد

#### ✅ تست 2: انتخاب شرکت‌کننده بیش از ظرفیت

1. تعداد بزرگسالان را به عددی بیشتر از `max_participants` تور تغییر دهید
2. **انتظار**: پیام خطای "از حداکثر ظرفیت تجاوز شده" نمایش داده شود
3. دکمه رزرو غیرفعال باشد

#### ✅ تست 3: انتخاب کمتر از حداقل شرکت‌کننده

1. تعداد شرکت‌کنندگان را به کمتر از `min_participants` تور تغییر دهید
2. **انتظار**: پیام خطای "حداقل X شرکت‌کننده الزامی است" نمایش داده شود

### 2. تست اعتبارسنجی گزینه‌ها

#### ✅ تست 4: انتخاب گزینه بیش از حد مجاز

1. گزینه‌ای را انتخاب کنید که `max_quantity` دارد
2. تعداد آن را بیش از حد مجاز افزایش دهید
3. **انتظار**: پیام خطای "حداکثر X گزینه مجاز است" نمایش داده شود

### 3. تست سیستم اعلان‌ها

#### ✅ تست 5: نمایش Toast موفقیت

1. یک رزرو معتبر انجام دهید
2. **انتظار**: Toast سبز با پیام "رزرو موفق" نمایش داده شود
3. هدایت به صفحه سبد خرید

#### ✅ تست 6: نمایش Toast خطا

1. یک رزرو نامعتبر انجام دهید
2. **انتظار**: Toast قرمز با پیام خطای مناسب نمایش داده شود

### 4. تست محافظت در برابر سوء استفاده

#### ✅ تست 7: Rate Limiting

1. به سرعت چندین درخواست رزرو ارسال کنید (بیش از 10 در دقیقه)
2. **انتظار**: پیام خطای "درخواست‌های زیادی ارسال شده" نمایش داده شود

#### ✅ تست 8: رزرو تکراری

1. یک رزرو انجام دهید
2. همان تور را دوباره برای همان تاریخ رزرو کنید
3. **انتظار**: پیام خطای "شما قبلاً برای این تور رزرو دارید" نمایش داده شود

## 🔧 دستورات تست

### اجرای تست E2E

```bash
# تست کامل
python test_tour_booking_e2e.py

# تست با URL سفارشی
python test_tour_booking_e2e.py --url http://localhost:8000

# ذخیره نتایج
python test_tour_booking_e2e.py --output test_results.json
```

### بررسی لاگ‌ها

```bash
# لاگ‌های Django
tail -f backend/logs/django.log

# لاگ‌های Nginx
tail -f /var/log/nginx/access.log
```

## 📋 چک‌لیست تست

- [ ] اعتبارسنجی شرکت‌کنندگان کار می‌کند
- [ ] اعتبارسنجی گزینه‌ها کار می‌کند
- [ ] سیستم اعلان‌ها کار می‌کند
- [ ] Rate limiting کار می‌کند
- [ ] محافظت در برابر رزرو تکراری کار می‌کند
- [ ] UI محدودیت‌ها قابل دور زدن نیستند
- [ ] پیام‌های خطا به فارسی و انگلیسی نمایش داده می‌شوند
- [ ] Dark mode در تمام پیام‌ها کار می‌کند

## 🐛 گزارش باگ

اگر مشکلی پیدا کردید، لطفاً موارد زیر را گزارش دهید:

1. **مراحل بازتولید**: دقیقاً چه کاری انجام دادید
2. **انتظار**: چه نتیجه‌ای انتظار داشتید
3. **نتیجه واقعی**: چه اتفاقی افتاد
4. **مرورگر**: کدام مرورگر استفاده کردید
5. **ورژن**: ورژن سیستم عامل
6. **لاگ‌ها**: هر گونه پیام خطا در کنسول

## 📞 پشتیبانی

برای گزارش مشکلات یا سوالات:

- ایمیل: support@peykantravelistanbul.com
- واتساپ: +90 555 123 4567
