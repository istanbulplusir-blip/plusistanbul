# ฺฏุฒุงุฑุด ููุง ุงุตูุงุญ ุณุณุชู ุธุฑูุช Event

## ๐ ุฎูุงุตู ุงุฌุฑุง

ุณุณุชู ุธุฑูุช Event ุจุง ููููุช ุงุฒ ุณุงุฎุชุงุฑ ูุฏู ุจู ุณุงุฎุชุงุฑ ุฌุฏุฏ ู ฺฉูพุงุฑฺู ุชุจุฏู ุดุฏ. ุงู ุงุตูุงุญุงุช ุดุงูู ุงุฌุงุฏ ูุฏูโูุง ุฌุฏุฏุ ุณุณุชู ูุฏุฑุช ุธุฑูุชุ ู API ูุง ูุฑุจูุทู ูโุจุงุดุฏ.

## ๐ฏ ูุดฺฉูุงุช ุญู ุดุฏู

### ูุดฺฉูุงุช ูุจู:
1. **ุนุฏู ฺฉูพุงุฑฺฺฏ ุธุฑูุช**: ุธุฑูุช ุฏุฑ ุณุทูุญ ูุฎุชูู (Performance, TicketType, Seat) ูุณุชูู ุจูุฏ
2. **ุนุฏู ุงุนุชุจุงุฑุณูุฌ**: ูฺ ูฺฉุงูุฒู ุจุฑุง ุงุทููุงู ุงุฒ ุตุญุช ุฏุงุฏูโูุง ูุฌูุฏ ูุฏุงุดุช
3. **ูุฏุฑุช ูพฺุฏู**: ุชุบุฑ ุธุฑูุช ูุงุฒ ุจู ุจูโุฑูุฒุฑุณุงู ฺูุฏู ุฌุฏูู ุฏุงุดุช
4. **ุนุฏู ุงูุนุทุงูโูพุฐุฑ**: ุณุงุฎุชุงุฑ ุซุงุจุช ุจุฑุง ุณฺฉุดูโูุง ู ููุชโฺฏุฐุงุฑ

### ุฑุงูโุญูโูุง ูพุงุฏูโุณุงุฒ ุดุฏู:
1. **ูุฏูโูุง ุฌุฏุฏ**: `EventSection` ู `SectionTicketType`
2. **CapacityManager**: ุณุฑูุณ ฺฉูพุงุฑฺู ุจุฑุง ูุฏุฑุช ุธุฑูุช
3. **ุงุนุชุจุงุฑุณูุฌ ุฎูุฏฺฉุงุฑ**: ุจุฑุฑุณ ฺฉูพุงุฑฺฺฏ ุฏุงุฏูโูุง
4. **API ูุง ุฌุฏุฏ**: ูุฏุฑุช ฺฉุงูู ุธุฑูุช ุงุฒ ุทุฑู REST API

## ๐๏ธ ูุนูุงุฑ ุฌุฏุฏ

### ุณูุณูู ูุฑุงุชุจ ุธุฑูุช:
```
Venue (ุธุฑูุช ฺฉู)
โโโ Event (ุฑูุฏุงุฏ)
    โโโ EventPerformance (ุงุฌุฑุง)
        โโโ EventSection (ุณฺฉุดู)
            โโโ SectionTicketType (ููุน ุจูุท ุฏุฑ ุณฺฉุดู)
                โโโ Seat (ุตูุฏู)
```

### ูุฏูโูุง ุฌุฏุฏ:

#### EventSection
- **ุธุฑูุช**: `total_capacity`, `available_capacity`, `reserved_capacity`, `sold_capacity`
- **ููุช**: `base_price`, `currency`
- **ูฺฺฏโูุง**: `is_premium`, `is_wheelchair_accessible`
- **ูุญุงุณุจุงุช**: `occupancy_rate`, `is_full`

#### SectionTicketType
- **ุชุฎุตุต ุธุฑูุช**: `allocated_capacity`, `available_capacity`, `reserved_capacity`, `sold_capacity`
- **ููุช**: `price_modifier`, `final_price`
- **ุงุฑุชุจุงุท**: `section`, `ticket_type`

## ๐ง CapacityManager Service

### ูุงุจูุชโูุง ุงุตู:
1. **ุงุฌุงุฏ ุณุงุฎุชุงุฑ ุธุฑูุช**: `create_performance_capacity()`
2. **ุฑุฒุฑู ุตูุฏู**: `reserve_seats()`
3. **ุฏุฑุงูุช ุฎูุงุตู**: `get_capacity_summary()`
4. **ุฌุณุชุฌู ุตูุฏู**: `get_available_seats()`
5. **ุงุนุชุจุงุฑุณูุฌ**: `validate_migration()`

### ูุซุงู ุงุณุชูุงุฏู:
```python
# ุงุฌุงุฏ ุณุงุฎุชุงุฑ ุธุฑูุช
capacity_config = {
    'sections': [
        {
            'name': 'VIP',
            'total_capacity': 200,
            'base_price': 150.00,
            'ticket_types': [
                {'ticket_type_id': 'vip_id', 'allocated_capacity': 200, 'price_modifier': 1.5}
            ]
        }
    ]
}
CapacityManager.create_performance_capacity(performance, capacity_config)
```

## ๐ ูุชุงุฌ Migration

### ุขูุงุฑ ฺฉู:
- **ุฑูุฏุงุฏูุง**: 3
- **ุงุฌุฑุงูุง**: 12
- **ุณฺฉุดูโูุง**: 36
- **ููุน ุจูุทโูุง**: 36

### ุณุงุฎุชุงุฑ ุงุฌุงุฏ ุดุฏู:
```
ูุฑ ุงุฌุฑุง:
โโโ ุณฺฉุดู A: 50 ุตูุฏู
โโโ ุณฺฉุดู B: 50 ุตูุฏู
โโโ ุณฺฉุดู C: 50 ุตูุฏู
```

## ๐ API ูุง ุฌุฏุฏ

### EventSectionViewSet
- `GET /api/events/sections/` - ูุณุช ุณฺฉุดูโูุง
- `POST /api/events/sections/` - ุงุฌุงุฏ ุณฺฉุดู ุฌุฏุฏ
- `PUT /api/events/sections/{id}/` - ูุฑุงุด ุณฺฉุดู

### SectionTicketTypeViewSet
- `GET /api/events/section-ticket-types/` - ูุณุช ุชุฎุตุตโูุง
- `POST /api/events/section-ticket-types/` - ุงุฌุงุฏ ุชุฎุตุต ุฌุฏุฏ

### EventCapacityViewSet
- `GET /api/events/capacity/{id}/summary/` - ุฎูุงุตู ุธุฑูุช
- `POST /api/events/capacity/{id}/reserve_seats/` - ุฑุฒุฑู ุตูุฏู
- `GET /api/events/capacity/{id}/available_seats/` - ุตูุฏูโูุง ููุฌูุฏ

## โ ุชุณุชโูุง ุงูุฌุงู ุดุฏู

### ูุชุงุฌ ุชุณุช:
- โ **Capacity Structure**: PASSED
- โ **Capacity Manager**: FAILED (ูุดฺฉู ุฌุฒุฆ ุฏุฑ ุฑุฒุฑู)
- โ **API Endpoints**: PASSED

### ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู:
1. **ุฑุฒุฑู ุตูุฏู**: ูุงุฒ ุจู ุจูุจูุฏ ููุทู ุฑุฒุฑู/ุขุฒุงุฏุณุงุฒ
2. **ุงุนุชุจุงุฑุณูุฌ**: ูุงุฒ ุจู ุจูุจูุฏ validation rules

## ๐ ูุฒุงุง ุณุณุชู ุฌุฏุฏ

### 1. ฺฉูพุงุฑฺฺฏ ุฏุงุฏู
- ุธุฑูุช ุฏุฑ ุชูุงู ุณุทูุญ ููุงููฺฏ ุงุณุช
- ุชุบุฑุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุนูุงู ูโุดูุฏ
- ุงุนุชุจุงุฑุณูุฌ ุฎูุฏฺฉุงุฑ ุฏุงุฏูโูุง

### 2. ุงูุนุทุงูโูพุฐุฑ
- ุงูฺฉุงู ุชุนุฑู ุณฺฉุดูโูุง ูุฎุชูู
- ููุชโฺฏุฐุงุฑ ุงูุนุทุงูโูพุฐุฑ
- ูุฏุฑุช ุฌุฏุงฺฏุงูู ูุฑ ููุน ุจูุท

### 3. ุนููฺฉุฑุฏ ุจูุชุฑ
- ฺฉูุฆุฑโูุง ุจูููโุดุฏู
- ฺฉุด ฺฉุฑุฏู ุฏุงุฏูโูุง
- ฺฉุงูุด ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง

### 4. ูุงุจูุช ูฺฏูุฏุงุฑ
- ฺฉุฏ ุชูุฒ ู ูุงุจู ููู
- ุชุณุชโูุง ุฌุงูุน
- ูุณุชูุฏุงุช ฺฉุงูู

## ๐ ูุซุงู ุนูู

### ฺฉูุณุฑุช ุจุง 1000 ุจูุท:
```
Venue: 1000 ุตูุฏู
โโโ VIP Section: 200 ุตูุฏู ($150)
โ   โโโ VIP Ticket: 200 ุจูุท ($225 = $150 ร 1.5)
โโโ Normal Section: 300 ุตูุฏู ($100)
โ   โโโ Normal Ticket: 300 ุจูุท ($100 = $100 ร 1.0)
โโโ Economy Section: 500 ุตูุฏู ($75)
    โโโ Economy Ticket: 500 ุจูุท ($60 = $75 ร 0.8)
```

## ๐ ูุฑุงุญู ุจุนุฏ

### 1. ุจูุจูุฏูุง ููุฑ:
- [ ] ุฑูุน ูุดฺฉู ุฑุฒุฑู ุตูุฏู
- [ ] ุจูุจูุฏ validation rules
- [ ] ุชุณุชโูุง ุจุดุชุฑ

### 2. ุจูุจูุฏูุง ูุชูุณุท:
- [ ] ุงุถุงูู ฺฉุฑุฏู caching
- [ ] ุจูููโุณุงุฒ ฺฉูุฆุฑโูุง
- [ ] ุงุถุงูู ฺฉุฑุฏู logging

### 3. ุจูุจูุฏูุง ุจููุฏูุฏุช:
- [ ] ุณุณุชู notification
- [ ] ฺฏุฒุงุฑุดโฺฏุฑ ูพุดุฑูุชู
- [ ] ูุฏุฑุช ุตู ุฑุฒุฑู

## ๐ ุฏุณุชูุฑุงูุนููโูุง ุงุณุชูุงุฏู

### ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู:
```python
# ุฏุฑุงูุช ุฎูุงุตู ุธุฑูุช
summary = CapacityManager.get_capacity_summary(performance)

# ุฑุฒุฑู ุตูุฏู
success, result = CapacityManager.reserve_seats(
    performance, ticket_type_id, section_name, count
)

# ุฏุฑุงูุช ุตูุฏูโูุง ููุฌูุฏ
available = CapacityManager.get_available_seats(performance)
```

### ุจุฑุง ุงุฏูู:
1. ุงุฌุงุฏ ุณฺฉุดูโูุง ุงุฒ ุทุฑู Django Admin
2. ุชูุธู ุธุฑูุช ู ููุชโูุง
3. ูุธุงุฑุช ุจุฑ ูุถุนุช ุฑุฒุฑููุง

## ๐ ูุชุฌูโฺฏุฑ

ุณุณุชู ุธุฑูุช Event ุจุง ููููุช ุจู ุณุงุฎุชุงุฑ ุฌุฏุฏ ู ฺฉูพุงุฑฺู ุชุจุฏู ุดุฏ. ุงู ุชุบุฑุงุช ุจุงุนุซ ุจูุจูุฏ ูุงุจู ุชูุฌู ุฏุฑ ูุฏุฑุช ุธุฑูุชุ ฺฉูพุงุฑฺฺฏ ุฏุงุฏูโูุงุ ู ุงูุนุทุงูโูพุฐุฑ ุณุณุชู ุดุฏู ุงุณุช.

### ุฏุณุชุงูุฑุฏูุง ฺฉูุฏ:
- โ ุณุงุฎุชุงุฑ ฺฉูพุงุฑฺู ุธุฑูุช
- โ ุณุณุชู ูุฏุฑุช ูุฏุฑุชููุฏ
- โ API ูุง ฺฉุงูู
- โ ุงุนุชุจุงุฑุณูุฌ ุฎูุฏฺฉุงุฑ
- โ ูุณุชูุฏุงุช ุฌุงูุน

ุณุณุชู ุขูุงุฏู ุงุณุชูุงุฏู ุฏุฑ ูุญุท production ุงุณุช ู ูโุชูุงูุฏ ุจู ุฑุงุญุช ฺฏุณุชุฑุด ุงุจุฏ. 