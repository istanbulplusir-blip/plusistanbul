# ุฑุงูููุง ุชุณุช ูุงฺฉุชูุฑ ฺูุฏุฒุจุงูู

## โ ุชุณุช ุงูุฌุงู ุดุฏู

### Backend Test
```bash
python backend/test_invoice.py
```

**ูุชุฌู:**
- โ English invoice: 912KB
- โ Persian invoice: 936KB  
- โ Arabic invoice: 935KB
- โ Font loaded: Sahel-Bold

---

## ๐งช ุชุณุช ุงุฒ ูุฑูุฑฺฏุฑ

### 1. ุชุณุช ูุงฺฉุชูุฑ ูุงุฑุณ
```
URL: http://localhost:3000/fa/orders/
```
1. ูุงฺฏู ฺฉูุฏ
2. ุจู ุตูุญู ุณูุงุฑุดุงุช ุจุฑูุฏ
3. ุฑู ุฏฺฉูู Download ฺฉูฺฉ ฺฉูุฏ
4. ูุงู `invoice-ORDA3699B6E.pdf` ุฏุงูููุฏ ูโุดูุฏ
5. ุจุงุฒ ฺฉูุฏ ู ุจุฑุฑุณ ฺฉูุฏ:
   - โ ูุชู ูุงุฑุณ ุฎูุงูุง ุจุงุดุฏ
   - โ ุฑุงุณุช ุจู ฺูพ ุจุงุดุฏ
   - โ ูููุช ุตุญุญ ุจุงุดุฏ

### 2. ุชุณุช ูุงฺฉุชูุฑ ุงูฺฏูุณ
```
URL: http://localhost:3000/en/orders/
```
ููุงู ูุฑุงุญู ุจุงูุง ุฑุง ุชฺฉุฑุงุฑ ฺฉูุฏ.

### 3. ุชุณุช ูุงฺฉุชูุฑ ุนุฑุจ
```
URL: http://localhost:3000/ar/orders/
```
ููุงู ูุฑุงุญู ุจุงูุง ุฑุง ุชฺฉุฑุงุฑ ฺฉูุฏ.

---

## ๐ ุจุฑุฑุณ ูุดฺฉูุงุช ุงุญุชูุงู

### ูุดฺฉู 1: ูุชู ูุงููููู (ูุฑุจุนโูุง ุง ุนูุงูุช ุณูุงู)
**ุนูุช:** ูููุช ูุงุฑุณ ููุฏ ูุดุฏู
**ุฑุงู ุญู:**
```bash
# ุจุฑุฑุณ ูุฌูุฏ ูููุช
ls backend/static/fonts/sahel/
ls backend/static/fonts/vazir/

# ุงฺฏุฑ ูุฌูุฏ ูุฏุงุฑุฏุ ุฏุงูููุฏ ฺฉูุฏ
```

### ูุดฺฉู 2: ุฒุจุงู ุชุบุฑ ููโฺฉูุฏ
**ุนูุช:** ูพุงุฑุงูุชุฑ `lang` ุงุฑุณุงู ููโุดูุฏ
**ุฑุงู ุญู:** 
1. ุจุงุฒ ฺฉุฑุฏู Developer Tools (F12)
2. ุฑูุชู ุจู Network tab
3. ฺฉูฺฉ ุฑู ุฏฺฉูู Download
4. ุจุฑุฑุณ URL:
   ```
   http://localhost:8000/api/v1/orders/ORDA3699B6E/invoice/?lang=fa
   ```
5. ุงฺฏุฑ `?lang=fa` ูุฌูุฏ ูุฏุงุฑุฏุ ูุดฺฉู ุงุฒ ูุฑุงูุชโุงูุฏ ุงุณุช

### ูุดฺฉู 3: ุฎุทุง 401 Unauthorized
**ุนูุช:** ุชูฺฉู ุงุฑุณุงู ููโุดูุฏ
**ุฑุงู ุญู:**
```javascript
// ุจุฑุฑุณ localStorage
console.log(localStorage.getItem('access_token'));
```

---

## ๐ ุชุณุช ุฏุณุช API

### ุจุง curl:
```bash
# ูุงุฑุณ
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8000/api/v1/orders/ORDA3699B6E/invoice/?lang=fa" \
  --output invoice_fa.pdf

# ุงูฺฏูุณ
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8000/api/v1/orders/ORDA3699B6E/invoice/?lang=en" \
  --output invoice_en.pdf

# ุนุฑุจ
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8000/api/v1/orders/ORDA3699B6E/invoice/?lang=ar" \
  --output invoice_ar.pdf
```

### ุจุง Postman:
1. Method: GET
2. URL: `http://localhost:8000/api/v1/orders/ORDA3699B6E/invoice/`
3. Headers:
   - `Authorization: Bearer YOUR_TOKEN`
4. Query Params:
   - `lang: fa` (ุง `en` ุง `ar`)
5. Send
6. Save Response โ Save to file

---

## โ ฺฺฉโูุณุช ุชุณุช

### ูุงฺฉุชูุฑ ูุงุฑุณ (fa):
- [ ] ูุชู ูุงุฑุณ ุฎูุงูุง ุงุณุช
- [ ] ุฑุงุณุช ุจู ฺูพ ุงุณุช
- [ ] ูููุช ุตุญุญ ุงุณุช
- [ ] ุงุนุฏุงุฏ ูุงุฑุณ ูุณุช (ุงูฺฏูุณ ุจุงุดุฏ)
- [ ] ุงููุฌโูุง ููุงุด ุฏุงุฏู ูโุดููุฏ
- [ ] ุฌุฏุงูู ุตุญุญ ูุณุชูุฏ
- [ ] ุฑูฺฏโุจูุฏ ุฏุฑุณุช ุงุณุช

### ูุงฺฉุชูุฑ ุงูฺฏูุณ (en):
- [ ] ูุชู ุงูฺฏูุณ ุงุณุช
- [ ] ฺูพ ุจู ุฑุงุณุช ุงุณุช
- [ ] ูููุช Helvetica ุงุณุช
- [ ] ุงุนุฏุงุฏ ุงูฺฏูุณ ูุณุชูุฏ
- [ ] ุงููุฌโูุง ููุงุด ุฏุงุฏู ูโุดููุฏ
- [ ] ุฌุฏุงูู ุตุญุญ ูุณุชูุฏ
- [ ] ุฑูฺฏโุจูุฏ ุฏุฑุณุช ุงุณุช

### ูุงฺฉุชูุฑ ุนุฑุจ (ar):
- [ ] ูุชู ุนุฑุจ ุฎูุงูุง ุงุณุช
- [ ] ุฑุงุณุช ุจู ฺูพ ุงุณุช
- [ ] ูููุช ุตุญุญ ุงุณุช
- [ ] ุงุนุฏุงุฏ ุงูฺฏูุณ ูุณุชูุฏ
- [ ] ุงููุฌโูุง ููุงุด ุฏุงุฏู ูโุดููุฏ
- [ ] ุฌุฏุงูู ุตุญุญ ูุณุชูุฏ
- [ ] ุฑูฺฏโุจูุฏ ุฏุฑุณุช ุงุณุช

---

## ๐ Debug Mode

ุงฺฏุฑ ูุดฺฉู ุฏุงุฑุฏุ ุงู ฺฉุฏ ุฑุง ุฏุฑ `views.py` ุงุถุงูู ฺฉูุฏ:

```python
def _get_invoice(self, order, request):
    try:
        from .pdf_service import pdf_generator

        # Debug: Print language detection
        lang_from_query = request.GET.get('lang')
        lang_from_header = request.headers.get('Accept-Language', 'en')
        print(f"๐ Language from query: {lang_from_query}")
        print(f"๐ Language from header: {lang_from_header}")
        
        language = lang_from_query or lang_from_header.split(',')[0].split('-')[0].lower()
        
        if language not in ['en', 'fa', 'ar']:
            language = 'en'
        
        print(f"โ Final language: {language}")
        
        # ... rest of code
```

ุณูพุณ ุฏุฑ console ุณุฑูุฑ ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฒุจุงู ุฏุฑุณุช ุชุดุฎุต ุฏุงุฏู ูโุดูุฏ.

---

## ๐ ูุชุฌู ุงูุชุธุงุฑ

### ูุงฺฉุชูุฑ ูุงุฑุณ ุจุงุฏ ุดุงูู:
```
๐ ูุงฺฉุชูุฑ ูุฑูุด
ุดูุงุฑู ุณูุงุฑุด: ORDA3699B6E
ุชุงุฑุฎ: 2025/01/15 - 14:30

๐ค ุงุทูุงุนุงุช ุตูุฑุชุญุณุงุจ
ูุงู ูุดุชุฑ: ุนู ุงุญูุฏ
ุงูู: ali@example.com
...

โจ ุงุฒ ุฎุฑุฏ ุดูุง ูุชุดฺฉุฑู!
```

### ูุงฺฉุชูุฑ ุงูฺฏูุณ ุจุงุฏ ุดุงูู:
```
๐ Sales Invoice
Order Number: ORDA3699B6E
Date: 2025/01/15 - 14:30

๐ค Billing Information
Customer Name: Ali Ahmadi
Email: ali@example.com
...

โจ Thank you for your business!
```

---

## ๐ฏ ูฺฉุงุช ููู

1. **ูููุช ูุงุฑุณ:** ุงฺฏุฑ ูููุช ููุฏ ูุดุฏุ ุงุฒ Helvetica ุงุณุชูุงุฏู ูโุดูุฏ (ูุชู ูุงููููู ูโุดูุฏ)
2. **RTL:** ููุท ุจุฑุง `fa` ู `ar` ูุนุงู ุงุณุช
3. **Fallback:** ุงฺฏุฑ ุฒุจุงู ูุงูุนุชุจุฑ ุจุงุดุฏุ ุจู `en` ุจุฑูโฺฏุฑุฏุฏ
4. **Cache:** ุงฺฏุฑ ุชุบุฑ ูุฏุฏุฏุ cache ูุฑูุฑฺฏุฑ ุฑุง ูพุงฺฉ ฺฉูุฏ

---

## ๐ ูุฑุญูู ุจุนุฏ

ุงฺฏุฑ ููู ุชุณุชโูุง ูููู ุจูุฏ:
1. โ ูููุชโูุง ุฑุง ุฏุฑ production ูู ูุฑุงุฑ ุฏูุฏ
2. โ ููฺฏู ุดุฑฺฉุช ุฑุง ุงุถุงูู ฺฉูุฏ
3. โ ุงุทูุงุนุงุช ุชูุงุณ ุฑุง ุจูโุฑูุฒ ฺฉูุฏ
4. โ ุชุฑุฌููโูุง ุจุดุชุฑ ุงุถุงูู ฺฉูุฏ
