# راهنمای حل مشکل فیلدهای قابل ترجمه در ادمین تور

## 🎯 **مشکل اصلی**

شما نمی‌توانید فیلدهای `title`, `description`, `short_description`, `highlights`, `rules`, `required_items` را در تب‌های زبان ادمین تور مشاهده کنید.

## ✅ **راه حل اعمال شده**

### **1. مشکل در فرم ادمین:**

مشکل در `TourAdminForm` بود که از `forms.ModelForm` استفاده می‌کرد، اما باید از `TranslatableModelForm` استفاده کند.

### **2. تغییرات اعمال شده:**

#### **الف) Import اضافه شد:**

```python
from parler.admin import TranslatableAdmin, TranslatableModelForm
```

#### **ب) فرم اصلاح شد:**

```python
class TourAdminForm(TranslatableModelForm):  # تغییر از forms.ModelForm
    """Custom form for Tour admin with enhanced validation."""

    class Meta:
        model = Tour
        fields = '__all__'
```

#### **ج) تنظیمات Parler بهبود یافت:**

```python
PARLER_ENABLE_CACHING = False  # اضافه شد
```

## 🔧 **نحوه استفاده صحیح**

### **مرحله 1: ایجاد تور جدید**

1. به آدرس `http://127.0.0.1:8000/admin/tours/tour/add/` بروید
2. در تب اصلی، فیلدهای غیر قابل ترجمه را پر کنید:
   - Category, City, Country
   - Price, Currency, Duration
   - Timing fields, Capacity fields
   - Services, Status fields

### **مرحله 2: تکمیل فیلدهای قابل ترجمه**

1. به تب‌های زبان بروید:
   - **فارسی**: عنوان، توضیح، توضیح کوتاه، نکات برجسته، قوانین، وسایل مورد نیاز
   - **English**: همان فیلدها به انگلیسی
   - **Türkçe**: همان فیلدها به ترکی

### **مرحله 3: ذخیره**

1. تمام فیلدهای اجباری را پر کنید
2. روی "Save" کلیک کنید

## 📋 **فیلدهای قابل ترجمه**

### **در هر تب زبان:**

- **Title** - عنوان تور
- **Description** - توضیح کامل تور
- **Short Description** - توضیح کوتاه تور
- **Highlights** - نکات برجسته تور
- **Rules** - قوانین و مقررات
- **Required Items** - وسایل مورد نیاز

### **فیلدهای غیر قابل ترجمه (در تب اصلی):**

- Category, Tour Type, Transport Type
- City, Country, Image, Gallery
- Price, Currency, Duration
- Timing fields, Capacity fields
- Services, Status fields

## ⚠️ **نکات مهم**

### **1. فیلدهای اجباری:**

- **Category**: حتماً انتخاب کنید
- **City**: حتماً وارد کنید
- **Country**: حتماً وارد کنید
- **Price**: حتماً وارد کنید
- **Duration**: حتماً وارد کنید

### **2. ترجمه‌ها:**

- حداقل یک زبان (فارسی) باید کامل باشد
- سایر زبان‌ها اختیاری هستند
- فیلدهای قابل ترجمه در تب‌های زبان جداگانه مدیریت می‌شوند

### **3. تصاویر:**

- **Image**: تصویر اصلی در بخش Location
- **Gallery**: گالری تصاویر در بخش Content

## 🔍 **عیب‌یابی**

### **اگر تب‌های زبان نمایش داده نمی‌شوند:**

1. مطمئن شوید که `django-parler` نصب شده است
2. تنظیمات `PARLER_LANGUAGES` را بررسی کنید
3. سرور را ری‌استارت کنید

### **اگر فیلدهای قابل ترجمه نمایش داده نمی‌شوند:**

1. مطمئن شوید که از `TranslatableModelForm` استفاده می‌کنید
2. تنظیمات `SITE_ID` را بررسی کنید
3. دیتابیس را بررسی کنید

### **اگر خطای KeyError دریافت می‌کنید:**

1. مطمئن شوید که فرم از `TranslatableModelForm` ارث‌بری می‌کند
2. فیلدهای قابل ترجمه را از `fieldsets` حذف کنید
3. سرور را ری‌استارت کنید

## 📊 **نمایش لیست**

### **ستون‌های نمایش:**

- Title (عنوان) - از ترجمه‌ها
- Category (دسته‌بندی)
- Tour Type (نوع تور)
- Transport Type (نوع حمل و نقل)
- Duration Hours (مدت زمان)
- Price (قیمت)
- Total Capacity (ظرفیت کل)
- Next Schedule (برنامه بعدی)
- Is Featured (ویژه)
- Is Popular (محبوب)
- Is Active (فعال)
- Booking Count (تعداد رزرو)

## 🎯 **بهترین شیوه‌ها**

1. **همیشه ابتدا فیلدهای غیر قابل ترجمه را پر کنید**
2. **سپس به ترتیب زبان‌ها را تکمیل کنید**
3. **از تصاویر با کیفیت مناسب استفاده کنید**
4. **قوانین و مقررات را واضح و کامل بنویسید**
5. **نکات برجسته را جذاب و مختصر نگه دارید**
6. **وسایل مورد نیاز را دقیق و کامل لیست کنید**
7. **قبل از ذخیره، تمام فیلدهای اجباری را بررسی کنید**

## 📞 **پشتیبانی**

اگر مشکلی دارید:

1. ابتدا این راهنما را مطالعه کنید
2. تنظیمات سیستم را بررسی کنید
3. با تیم توسعه تماس بگیرید

---

**آخرین به‌روزرسانی:** 2025-09-04
**وضعیت:** ✅ حل شده
**مشکل:** فیلدهای قابل ترجمه در تب‌های زبان مدیریت می‌شوند
